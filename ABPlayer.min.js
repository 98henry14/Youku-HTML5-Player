function isMobile(){var e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||window.opera),e}Array.from=Array.from||function(e){return[].slice.call(e)};var ABP={version:"0.8.0"};ABP.Strings={statsPlayer:_t("statsPlayer"),statsVideo:_t("statsVideo"),statsBuffer:_t("statsBuffer"),statsBufferClip:_t("statsBufferClip"),statsMozParse:_t("statsMozParse"),statsMozDecode:_t("statsMozDecode"),statsMozPaint:_t("statsMozPaint"),statsWebkitDecode:_t("statsWebkitDecode"),statsPresent:_t("statsPresent"),statsDrop:_t("statsDrop"),statsMimetype:_t("statsMimetype"),statsVideoBitrate:_t("statsVideoBitrate"),statsAudioBitrate:_t("statsAudioBitrate"),statsCurrentBitrate:_t("statsCurrentBitrate"),statsRealtimeBitrate:_t("statsRealtimeBitrate"),overallBitrate:_t("overallBitrate"),statsDownloadSpeed:_t("statsDownloadSpeed"),sendSmall:_t("sendSmall"),sendMid:_t("sendMid"),sendSize:_t("sendSize"),sendMode:_t("sendMode"),sendTop:_t("sendTop"),sendScroll:_t("sendScroll"),sendBottom:_t("sendBottom"),send:_t("send"),sendStyle:_t("sendStyle"),sendColor:_t("sendColor"),commentSpeed:_t("commentSpeed"),commentScale:_t("commentScale"),commentOpacity:_t("commentOpacity"),commentBlock:_t("commentBlock"),playSpeed:_t("playSpeed"),playSpeedReset:_t("playSpeedReset"),displayScaleD:_t("displayScaleD"),displayScaleF:_t("displayScaleF"),shieldTypeText:_t("shieldTypeText"),shieldTypeUser:_t("shieldTypeUser"),shieldTypeColor:_t("shieldTypeColor"),shieldTypeSetting:_t("shieldTypeSetting"),shieldAdd:_t("shieldAdd"),shieldUseRegex:_t("shieldUseRegex"),shieldBlockTop:_t("shieldBlockTop"),shieldBlockBottom:_t("shieldBlockBottom"),shieldBlockVisitor:_t("shieldBlockVisitor"),shieldRepeat:_t("shieldRepeat"),viewers:_t("viewers"),comments:_t("comments"),commentTime:_t("commentTime"),commentContent:_t("commentContent"),commentDate:_t("commentDate"),showStats:_t("showStats"),loadingMeta:_t("loadingMeta"),switching:_t("switching"),fetchURL:_t("fetchURL"),buffering:_t("buffering"),play:_t("play"),pause:_t("pause"),mute:_t("mute"),unmute:_t("unmute"),muteNotSupported:_t("muteNotSupported"),fullScreen:_t("fullScreen"),exitFullScreen:_t("exitFullScreen"),webFull:_t("webFull"),exitWebFull:_t("exitWebFull"),wideScreen:_t("wideScreen"),exitWideScreen:_t("exitWideScreen"),sendTooltip:_t("sendTooltip"),showComment:_t("showComment"),hideComment:_t("hideComment"),loopOn:_t("loopOn"),loopOff:_t("loopOff"),usingCanvas:_t("usingCanvas"),usingCSS:_t("usingCSS"),useCSS:_t("useCSS"),autoOpacityOn:_t("autoOpacityOn"),autoOpacityOff:_t("autoOpacityOff"),copyComment:_t("copyComment"),findComment:_t("findComment"),blockContent:_t("blockContent"),blockUser:_t("blockUser"),blockColor:_t("blockColor"),blockColorWhite:_t("blockColorWhite"),copyFail:_t("copyFail"),blockUserEmpty:_t("blockUserEmpty"),blockColorEmpty:_t("blockColorEmpty"),repeatPcs:_t("repeatPcs"),repeatUnlimited:_t("repeatUnlimited"),dragControlLowInc:_t("dragControlLowInc"),dragControlLowDec:_t("dragControlLowDec"),dragControlMedInc:_t("dragControlMedInc"),dragControlMedDec:_t("dragControlMedDec"),dragControlHighInc:_t("dragControlHighInc"),dragControlHighDec:_t("dragControlHighDec"),dragControlCancel:_t("dragControlCancel")},function(){"use strict";if(ABP){var e=jQuery,t="addEventListener",i="HTML5 Player ver.170512 based on ABPlayer-bilibili-ver",a=[0,0],o=function(e){var t=a;return a=[e.clientX,e.clientY],!(t[0]==a[0]&&t[1]==a[1])},n=function(e){return document.getElementById(e)},l=function(e,t){for(;e;e=e.parentNode)if(v(e.parentNode,t))return e};HTMLElement.prototype.tooltip=function(e){this.tooltipData=e,this.dispatchEvent(new Event("updatetooltip"))},"undefined"==typeof HTMLElement.prototype.requestFullScreen&&(HTMLElement.prototype.requestFullScreen=function(){this.webkitRequestFullscreen?this.webkitRequestFullscreen():this.mozRequestFullScreen?this.mozRequestFullScreen():this.msRequestFullscreen&&this.msRequestFullscreen()}),"undefined"==typeof document.isFullScreen&&(document.isFullScreen=function(){return document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenEnabled}),"undefined"==typeof document.exitFullscreen&&(document.exitFullscreen=function(){document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():window.msExitFullscreen&&msExitFullscreen()});var s=function(e,t){t=t||2;for(var i=""+e;i.length<t;)i="0"+i;return i},r=function(e,t){for(var i="",a=1;a<=t-(e+"").length;a++)i+="0";return i+e},c=function(e,t){if(0==e)return lang.oneDay;var i,a,o,n,l,s,r=new Date(1e3*parseInt(e));return i=String(r.getFullYear()),a=String(r.getMonth()+1),1==a.length&&(a="0"+a),o=String(r.getDate()),1==o.length&&(o="0"+o),n=String(r.getHours()),1==n.length&&(n="0"+n),l=String(r.getMinutes()),1==l.length&&(l="0"+l),s=String(r.getSeconds()),1==s.length&&(s="0"+s),String(t?a+"-"+o+" "+n+":"+l:i+"-"+a+"-"+o+" "+n+":"+l+":"+s)},d=function(e){return isNaN(e)?"00:00":r(parseInt(e/60),2)+":"+r(parseInt(e%60),2)},m=function(e){for(var t=e.split(":"),i=0,a=0;a<t.length;a++){i*=60;var o=parseInt(t[a]);if(isNaN(o)||0>o)return!1;i+=o}return i},p=function(e,i,a){if(e){e[t]("mousemove",function(t){var o,s=n("ABP-Tooltip"),r=e.clientWidth,c=e.clientHeight,d=e.getBoundingClientRect(),m=l(e,"ABP-Unit").getBoundingClientRect(),p=d.top-m.top,u=i?t.clientX-m.left:d.left-m.left,v=u;null==s&&(s=_("div",{id:"ABP-Tooltip"},[_("text",e.tooltipData)]),s.by=e,l(e,"ABP-Unit").appendChild(s),s.style.top=p+c+2+"px",s.style.left=u+r/2-s.clientWidth/2+"px",v+=r/2-s.clientWidth/2),i&&(s.style.left=u-s.clientWidth/2+"px",v-=r/2),o=s.getBoundingClientRect(),o.left<m.left?s.style.left="0px":o.right>m.right&&(s.style.left=m.width-o.width+"px"),a=a||-6,a&&(s.style.top=p-s.clientHeight+2+a+"px")});var o=function(){var e=n("ABP-Tooltip");e&&e.parentNode&&e.remove()},s=null;e[t]("mouseout",o),e[t]("touchend",function(){null!=s&&(clearTimeout(s),s=null),s=setTimeout(function(){s=null,o()},2e3)}),e[t]("updatetooltip",function(t){var i=n("ABP-Tooltip");i&&i.by==t.target&&(i.innerHTML=e.tooltipData)})}},u=function(e,t){if(null!=e){var i=e.className.split(" ");""==i[0]&&(i=[]),i.indexOf(t)<0&&i.push(t),e.className=i.join(" ")}},v=function(e,t){if(null==e)return!1;var i=e.className.split(" ");return""==i[0]&&(i=[]),i.indexOf(t)>=0},f=function(e,t){if(null!=e){var i=e.className.split(" ");""==i[0]&&(i=[]),i.indexOf(t)>=0&&i.splice(i.indexOf(t),1),e.className=i.join(" ")}},g=function(e,t){var i={};for(var a in t)i[a]=e&&"undefined"!=typeof e[a]?e[a]:t[a];return i};ABP.create=function(e,a){var o=e;if(a||(a={}),ABP.playerConfig=a.config?a.config:{},a=g(a,{replaceMode:!0,width:512,height:384,src:""}),"string"==typeof e&&(o=n(e)),v(o,"ABP-Unit"))l=o;else{var l=_("div",{className:"ABP-Unit",style:{width:a.width.toString().indexOf("%")>=0?a.width:a.width+"px",height:a.height.toString().indexOf("%")>=0?a.height:a.height+"px"}});o.appendChild(l)}l.children.length>0&&a.replaceMode&&(l.innerHTML="");var s=[],r=[];if("string"==typeof a.src)a.src=_("video",{autobuffer:"true",dataSetup:"{}"},[_("source",{src:a.src})]),s.push(a.src);else if(a.src.hasOwnProperty("playlist"))for(var c=a.src,d=c.playlist,m=0;m<d.length;m++){if(d[m].hasOwnProperty("sources")){var p=[];for(var u in d[m].sources)p.push(_("source",{src:d[m][u],type:u}));s.push(_("video",{autobuffer:"true",dataSetup:"{}"},p))}else d[m].hasOwnProperty("video")&&s.push(d[m].video);r.push(d[m].comments)}else s.push(a.src);l.appendChild(_("div",{className:"ABP-Player"},[_("div",{className:"ABP-Video",tabindex:"10"},[_("div",{id:"info-box",style:{opacity:1}},[_("div",{className:"text-wrapper"},[_("div",{},[_("text",ABP.Strings.loadingMeta)])]),_("div",{id:"dots"})]),_("div",{className:"ABP-Container"},[_("div",{className:"cmt",style:{left:0}},[_("text","　")])]),s[0],_("div",{className:"Player-Stats"},[_("div",{id:"player-dimension"},[_("span",{className:"stats_name"},[_("text",ABP.Strings.statsPlayer)]),_("span")]),_("div",{id:"video-dimension"},[_("span",{className:"stats_name"},[_("text",ABP.Strings.statsVideo)]),_("span")]),_("div",{id:"mimeType"},[_("span",{className:"stats_name"},[_("text",ABP.Strings.statsMimetype)]),_("span")]),_("div",{id:"buffer-health"},[_("span",{className:"stats_name"},[_("text",ABP.Strings.statsBuffer)]),_("span",{className:"stats-column",id:"buffer-health-column"}),_("span")]),_("div",{style:{position:"relative"}},[_("span",{className:"stats_name"},[_("text",ABP.Strings.statsBufferClip)]),_("span",{id:"buffer-clips"},[_("span"),_("span",{},[_("div",{style:{width:"1px",height:"400%",top:"-150%",position:"absolute",background:"#FFF",left:0}})])]),_("pre",{style:{position:"absolute",margin:0,left:"250px",width:"90px",fontFamily:"inherit"}})]),_("br",{className:"flvjs"}),_("div",{className:"flvjs"},[_("span",{className:"stats_name"},[_("text","fps：")]),_("span")]),_("div",{className:"flvjs",title:"1 kbps = 1000 bps"},[_("span",{className:"stats_name"},[_("text",ABP.Strings.statsVideoBitrate)]),_("span")]),_("div",{className:"flvjs",title:"1 kbps = 1000 bps"},[_("span",{className:"stats_name"},[_("text",ABP.Strings.statsAudioBitrate)]),_("span")]),_("div",{className:"flvjs",title:"1 kbps = 1000 bps"},[_("span",{className:"stats_name"},[_("text",ABP.Strings.statsCurrentBitrate)]),_("span")]),_("div",{title:"1 kbps = 1000 bps"},[_("span",{className:"stats_name"},[_("text",ABP.Strings.overallBitrate)]),_("span",{id:"overall-bitrate"})]),_("div",{className:"flvjs",title:"1 kbps = 1000 bps"},[_("span",{className:"stats_name"},[_("text",ABP.Strings.statsRealtimeBitrate)]),_("span",{className:"stats-column",id:"realtime-bitrate-column",style:{verticalAlign:"top"}}),_("span")]),_("div",{className:"flvjs"},[_("span",{className:"stats_name"},[_("text",ABP.Strings.statsDownloadSpeed)]),_("span",{className:"stats-column",id:"download-speed-column",style:{verticalAlign:"top"}}),_("span")]),_("br"),_("div",{className:"gecko"},[_("span",{className:"stats_name"},[_("text",ABP.Strings.statsMozParse)]),_("span",{id:"mozParsedFrames"})]),_("div",{className:"gecko"},[_("span",{className:"stats_name"},[_("text",ABP.Strings.statsMozDecode)]),_("span",{id:"mozDecodedFrames"})]),_("div",{className:"gecko"},[_("span",{className:"stats_name"},[_("text",ABP.Strings.statsMozPaint)]),_("span",{id:"mozPaintedFrames"})]),_("div",{className:"webkit"},[_("span",{className:"stats_name"},[_("text",ABP.Strings.statsWebkitDecode)]),_("span",{id:"webkitDecodedFrameCount"})]),_("div",{className:"webkit"},[_("span",{className:"stats_name"},[_("text",ABP.Strings.statsDrop)]),_("span",{id:"webkitDroppedFrameCount"})]),_("div",{className:"videoQuality"},[_("span",{className:"stats_name"},[_("text",ABP.Strings.statsPresent)]),_("span",{id:"totalVideoFrames"})]),_("div",{className:"videoQuality"},[_("span",{className:"stats_name"},[_("text",ABP.Strings.statsDrop)]),_("span",{id:"droppedVideoFrames"})]),_("br"),_("div",{style:{fontSize:"11px"}},[_("text",i)]),_("div",{style:{fontSize:"11px"}},[_("text","2017©esterTion")]),_("div",{id:"stats-close"},[_("text","×")])]),_("div",{className:"Drag-Control"},[_("div",{className:"Drag-Icon"}),_("div",{className:"Drag-Speed"},[_("text","")]),_("div",{className:"Drag-Time"},[_("text","00:00╱00:00")]),_("div",{className:"Drag-Time-Bar"},[_("div",{className:"fill"})])])]),_("div",{className:"ABP-Bottom"},[_("div",{className:"ABP-Bottom-Extend"}),_("div",{className:"BiliPlus-Scale-Menu"},[_("div",{className:"Video-Defination"}),_("div",{className:"Video-Scale"},[_("div",{changeTo:"default",className:"on"},[_("text",ABP.Strings.displayScaleD)]),_("div",{changeTo:"16_9"},[_("text","16:9")]),_("div",{changeTo:"4_3"},[_("text","4:3")]),_("div",{changeTo:"full"},[_("text",ABP.Strings.displayScaleF)])])]),_("div",{className:"ABP-Text"},[_("div",{className:"ABP-CommentStyle"},[_("div",{className:"button-group ABP-Comment-FontGroup"},[_("div",{className:"button ABP-Comment-Font icon-font-style"}),_("div",{className:"ABP-Comment-FontOption"},[_("p",{className:"style-title"},[_("text",ABP.Strings.sendSize)]),_("div",{className:"style-select",name:"commentFontSize"},[_("div",{className:"style-option",value:18},[_("text",ABP.Strings.sendSmall)]),_("div",{className:"style-option on",value:25},[_("text",ABP.Strings.sendMid)])]),_("p",{className:"style-title"},[_("text",ABP.Strings.sendMode)]),_("div",{className:"style-select",name:"commentMode"},[_("div",{className:"style-option",value:5},[_("text",ABP.Strings.sendTop)]),_("div",{className:"style-option on",value:1},[_("text",ABP.Strings.sendScroll)]),_("div",{className:"style-option",value:4},[_("text",ABP.Strings.sendBottom)])])])]),_("div",{className:"button-group ABP-Comment-ColorGroup"},[_("div",{className:"ABP-Comment-Color-Display"}),_("div",{className:"button ABP-Comment-Color icon-color-mode"}),_("div",{className:"ABP-Comment-ColorOption"},[_("div",{className:"ABP-Comment-ColorPicker"})])])]),_("form",{},[_("input",{className:"ABP-Comment-Input"})]),_("div",{className:"ABP-Comment-Send"},[_("text",ABP.Strings.send)])]),_("div",{className:"ABP-Control"},[_("div",{className:"button ABP-Play icon-play"}),_("div",{className:"progress-bar"},[_("div",{className:"bar"},[_("div",{className:"load"}),_("div",{className:"dark"})])]),_("div",{className:"time-label"},[_("text","00:00 / 00:00")]),_("div",{className:"button ABP-Volume icon-volume-high"}),_("div",{className:"volume-bar"},[_("div",{className:"bar"},[_("div",{className:"load"})])]),_("div",{className:"button-group ABP-CommentGroup"},[_("div",{className:"button ABP-CommentShow icon-comment on"}),_("div",{className:"ABP-CommentOption"},[_("p",{className:"label",style:{display:"none"}},[_("text",ABP.Strings.useCSS),_("div",{className:"prop-checkbox"})]),_("p",{className:"label"},[_("text",ABP.Strings.commentSpeed)]),_("div",{className:"speed-bar"},[_("div",{className:"bar"},[_("div",{className:"load"})])]),_("p",{className:"label"},[_("text",ABP.Strings.commentScale)]),_("div",{className:"scale-bar"},[_("div",{className:"bar"},[_("div",{className:"load"})])]),_("p",{className:"label"},[_("text",ABP.Strings.commentOpacity)]),_("div",{className:"opacity-bar",style:{width:"calc(100% - 25px)"}},[_("div",{className:"bar"},[_("div",{className:"load"})])]),_("div",{className:"prop-checkbox",style:{top:"101px"}}),_("div",{className:"shield-enrty"},[_("text",ABP.Strings.commentBlock)])])]),_("div",{className:"button-group ABP-PlaySpeedGroup"},[_("div",{className:"button ABP-Loop icon-loop"}),_("div",{className:"ABP-PlaySpeedOption"},[_("p",{className:"label"},[_("text",ABP.Strings.playSpeed)]),_("div",{className:"playSpeed-bar"},[_("div",{className:"bar"},[_("div",{className:"load"})])]),_("div",{className:"play-speed-reset"},[_("text",ABP.Strings.playSpeedReset)])])]),_("div",{className:"button ABP-WideScreen icon-tv"}),_("div",{className:"button-group ABP-FullScreenGroup"},[_("div",{className:"button ABP-FullScreen icon-screen-full"}),_("div",{className:"button ABP-Web-FullScreen icon-screen"})])])])])),l.appendChild(_("div",{className:"shield hidden"},[_("div",{className:"shield_top"},[_("text",ABP.Strings.commentBlock),_("span",{className:"close"})]),_("div",{className:"shield_tabs"},[_("div",{className:"shield_tab on"},[_("div",{},[_("text",ABP.Strings.shieldTypeText)])]),_("div",{className:"shield_tab"},[_("div",{},[_("text",ABP.Strings.shieldTypeUser)])]),_("div",{className:"shield_tab"},[_("div",{},[_("text",ABP.Strings.shieldTypeColor)])]),_("div",{className:"shield_tab"},[_("div",{},[_("text",ABP.Strings.shieldTypeSetting)])])]),_("div",{className:"shield_tab_slash"}),_("div",{className:"shield_body"},[_("div",{className:"shield_body_wrapper"},[_("div",{className:"shield_tab_body"},[_("div",{id:"shield_text"}),_("div",{className:"shield_item"},[_("input",{className:"new",type:"text",placeholder:ABP.Strings.shieldAdd}),_("div",{className:"add"})])]),_("div",{className:"shield_tab_body"},[_("div",{id:"shield_user"})]),_("div",{className:"shield_tab_body"},[_("div",{id:"shield_color"})]),_("div",{className:"shield_tab_body"},[_("div",{className:"shield_toggle",id:"useReg"},[_("text",ABP.Strings.shieldUseRegex)]),_("div",{className:"shield_toggle",id:"blockTop"},[_("text",ABP.Strings.shieldBlockTop)]),_("div",{className:"shield_toggle",id:"blockBottom"},[_("text",ABP.Strings.shieldBlockBottom)]),_("div",{className:"shield_toggle",id:"blockVisitor",style:{display:"none"}},[_("text",ABP.Strings.shieldBlockVisitor)]),_("div",{className:"shield_slide",id:"repeat"},[_("div",{className:"fill"}),_("div",{className:"button"}),_("div",{className:"slide_info"})]),_("div",{style:{padding:"0 16px"}},[_("text",ABP.Strings.shieldRepeat)])])])])])),l.appendChild(_("div",{className:"ABP-Comment-List"},[_("div",{className:"ABP-Comment-List-Count"},[_("div",{style:{position:"absolute",right:"200px"}},[_("span",{id:"viewer",style:{fontWeight:"bold"}},[_("text","--")]),_("text",ABP.Strings.viewers)]),_("div",{style:{position:"absolute",right:"20px"}},[_("span",{id:"danmaku",style:{fontWeight:"bold"}},[_("text","--")]),_("text",ABP.Strings.comments)])]),_("div",{className:"ABP-Comment-List-Title"},[_("div",{className:"cmt-time",item:"time"},[_("text",ABP.Strings.commentTime)]),_("div",{className:"cmt-content",item:"content"},[_("text",ABP.Strings.commentContent)]),_("div",{className:"cmt-date",item:"date"},[_("text",ABP.Strings.commentDate)])]),_("div",{className:"ABP-Comment-List-Container"},[_("ul",{className:"ABP-Comment-List-Container-Inner"})])])),l.appendChild(_("div",{className:"Context-Menu"},[_("div",{className:"Context-Menu-Background"}),_("div",{className:"Context-Menu-Body"},[_("div",{id:"Player-Stats-Toggle"},[_("text",ABP.Strings.showStats)]),_("div",{id:"Player-Speed-Control",className:"dm static"},[_("div",{className:"content"},[_("text",ABP.Strings.playSpeed)]),_("div",{className:"dmMenu",style:{top:"-37px"}},[_("div",{"data-speed":.5},[_("text",.5)]),_("div",{"data-speed":1},[_("text",1)]),_("div",{"data-speed":1.25},[_("text",1.25)]),_("div",{"data-speed":1.5},[_("text",1.5)]),_("div",{"data-speed":2},[_("text",2)])])]),_("div",{className:"about"},[_("text",i)])])]));var f=ABP.bind(l);if(s.length>0){var h=s[0];f.gotoNext=function(){var e=s.indexOf(h)+1;if(e<s.length){h=s[e],h.style.display="";var i=f.video.parentNode;i.removeChild(f.video),i.appendChild(h),f.video.style.display="none",f.video=h,f.swapVideo(h),h[t]("ended",function(){f.gotoNext()})}},h[t]("ended",function(){f.gotoNext()})}return f};var h=function(e){for(var t,i,a=0,o=e.currentTime;a<e.buffered.length;a++)if(o>=e.buffered.start(a)&&o<=e.buffered.end(a)){t=e.buffered.start(a),i=e.buffered.end(a);break}if(a==e.buffered.length)throw"Not in a range";return{start:t,end:i,delta:i-o}};ABP.bind=function(i,a){var l={playerUnit:i,btnPlay:null,barTime:null,barLoad:null,barTimeHitArea:null,barVolume:null,barVolumeHitArea:null,barOpacity:null,barOpacityHitArea:null,barScale:null,barScaleHitArea:null,barSpeed:null,barSpeedHitArea:null,barPlaySpeed:null,barPlaySpeedHitArea:null,btnFont:null,btnColor:null,btnSend:null,controlBar:null,timeLabel:null,timeJump:null,divComment:null,btnWide:null,btnFull:null,btnWebFull:null,btnDm:null,btnLoop:null,btnProp:null,btnAutoOpacity:null,videoDiv:null,btnVolume:null,video:null,txtText:null,commentColor:"ffffff",commentFontSize:25,commentMode:1,displayColor:null,cmManager:null,commentList:null,commentListContainer:null,lastSelectedComment:null,commentCoolDown:1e4,commentScale:ABP.playerConfig.scale?ABP.playerConfig.scale:1,commentSpeed:ABP.playerConfig.speed?ABP.playerConfig.speed:1,proportionalScale:ABP.playerConfig.prop,defaults:{w:0,h:0},state:g(a,{fullscreen:!1,commentVisible:!0,allowRescale:!1,autosize:!1,widescreen:!1}),createPopup:function(e,t){if(i.hasPopup===!0)return!1;var a=_("div",{className:"ABP-Popup"},[_("text",e)]);return a.remove=function(){a.isRemoved||(a.isRemoved=!0,i.removeChild(a),i.hasPopup=!1)},i.appendChild(a),i.hasPopup=!0,"number"==typeof t&&setTimeout(function(){a.remove()},t),a},removePopup:function(){for(var e=i.getElementsByClassName("ABP-Popup"),t=0;t<e.length;t++)null!=e[t].remove?e[t].remove():e[t].parentNode.removeChild(e[t]);i.hasPopup=!1},loadCommentList:function(e,i){i="asc"==i?-1:1;var a=Object.keys(l.commentList).sort(function(t,a){return l.commentList[t][e]<l.commentList[a][e]?i:l.commentList[t][e]>l.commentList[a][e]?-i:0});l.commentObjArray=[];for(b in a){var o=a[b],n=l.commentList[o];if(n&&n.time){var s=_("li",{}),r=_("span",{className:"cmt-time"},[_("text",d(n.time/1e3))]),m=_("span",{className:"cmt-content"},[_("text",n.content)]),u=_("span",{className:"cmt-date"},[_("text",c(n.date,!0))]);p(m,!1,36),p(u,!1,18),m.tooltip(n.content),u.tooltip(c(n.date)),s.appendChild(r),s.appendChild(m),s.appendChild(u),s.data=n,s.originalData=danmaku,8==n.mode?s.style.background="#ffe100":0!=n.pool&&(s.style.background="#20ff20"),s[t]("dblclick",function(){l.video.currentTime=this.data.time/1e3,Ke(y.currentTime)}),l.commentObjArray.push(s)}}l.commentListContainer.style.height=24*l.commentObjArray.length+"px",l.renderCommentList(),l.playerUnit.querySelector(".ABP-Comment-List-Count span#danmaku").innerHTML=l.commentObjArray.length},renderCommentList:function(){},commentCallback:function(e){e.result?(l.commentList[e.id]=l.commentList[e.tmp_id],delete l.commentList[e.tmp_id]):(delete l.commentList[e.tmp_id],l.createPopup(e.error,5e3))},swapVideo:null};if(l.swapVideo=function(e){var a=function(){if(!Je){Ke(e.currentTime);try{var t=h(this),i=this.duration,a=t.end/i*100;l.barLoad.style.width=a+"%"}catch(e){return}}};e[t]("timeupdate",a);var o=0,n=!1,s=!1,r=!1,c=function(){r=!1,e.removeEventListener("canplay",c),e.paused&&l.btnPlay.click(),void 0!=l.lastTime&&(e.currentTime=l.lastTime,delete l.lastTime),void 0!=l.lastSpeed&&(e.playbackRate=l.lastSpeed,delete l.lastSpeed)},d=function(){var t=e.readyState,i=document.getElementById("info-box");if(!e.ended)switch(t){case 1:isMobile()&&e.paused&&(l.createPopup("请点击播放器开始播放",3e3),l.video.dispatchEvent(new Event("autoPlayFailed")));case 2:0==i.style.opacity&&(i.style.opacity=1),dots.running||dots.runTimer();try{var a=h(e);i.childNodes[0].childNodes[0].innerHTML=ABP.Strings.buffering+" "+Math.floor(100*a.delta)/100+"s"}catch(e){i.childNodes[0].childNodes[0].innerHTML=ABP.Strings.buffering}break;case 3:case 4:1==i.style.opacity&&(i.style.opacity=0,dots.stopTimer())}},m=function(){if(window.cid&&!n&&!s&&!r){var t=JSON.parse(localStorage.playHistory||"{}");t[cid]=0|e.currentTime,localStorage.playHistory=JSON.stringify(t)}},p=function(){if(window.cid){var e=JSON.parse(localStorage.playHistory||"{}");e[cid]&&delete e[cid],localStorage.playHistory=JSON.stringify(e)}};e[t]("autoplay",function(){e[t]("canplay",c)}),e[t]("pause",m),e[t]("ended",function(){n=!0,p()});try{var v=JSON.parse(localStorage.playHistory||"{}");void 0!=v[cid]&&(l.lastTime=v[cid])}catch(e){}window[t]("beforeunload",function(){return m(),null}),l.playerUnit[t]("beforecidchange",function(){m(),r=!0,n=!1}),e[t]("loop",function(){s=e.loop}),e[t]("canplay",c),e[t]("canplay",d),e[t]("waiting",d),e[t]("progress",d),e[t]("ended",function(){l.btnPlay.className="button ABP-Play icon-play",l.videoDiv.className="ABP-Video",window.parent!=window&&parent.h5NextPart&&parent.h5NextPart()}),e[t]("progress",a),e.isBound=!0;var g=0;if(l.cmManager){l.cmManager.setBounds=function(){i.offsetHeight<=300||i.offsetWidth<=700?u(i,"ABP-Mini"):f(i,"ABP-Mini");{var e=l.videoDiv.offsetWidth,t=l.videoDiv.offsetHeight;l.proportionalScale?t/493*l.commentScale:l.commentScale}this.width=e,this.height=t,this.options.global.scale=this.width/680/l.commentSpeed,this.dispatchEvent("resize");for(var a in this.csa)this.csa[a].setBounds(this.width,this.height);this.stage.style.width=this.width+"px",this.stage.style.height=this.height+"px",this.stage.style.perspective=this.width*Math.tan(40*Math.PI/180)/2+"px",this.stage.style.webkitPerspective=this.width*Math.tan(40*Math.PI/180)/2+"px",i.querySelector(".BiliPlus-Scale-Menu .Video-Scale div.on").click()},l.cmManager.setBounds(),l.cmManager.clear(),e[t]("progress",function(){g==e.currentTime&&_&&(new Date).getTime()-o>=100?(e.hasStalled=!0,l.cmManager.stopTimer(),l.cmManager.pauseComment()):g!=e.currentTime&&(g=e.currentTime),o=(new Date).getTime()}),window&&window[t]("resize",function(){l.cmManager.setBounds()}),e[t]("timeupdate",function(){l.cmManager.display!==!1&&(e.hasStalled&&(l.cmManager.startTimer(),l.cmManager.resumeComment(),e.hasStalled=!1),l.cmManager.time(Math.floor(1e3*e.currentTime)))}),e[t]("play",function(){l.cmManager.startTimer(),l.cmManager.resumeComment(),l.btnPlay.className="button ABP-Play ABP-Pause icon-pause",l.btnPlay.tooltip(ABP.Strings.pause),u(l.videoDiv,"ABP-HideCursor")}),e[t]("ratechange",function(){0!==e.playbackRate&&st(l.video.playbackRate)});var _=!1;e[t]("pause",function(){l.cmManager.stopTimer(),l.cmManager.pauseComment(),l.btnPlay.className="button ABP-Play icon-play",l.btnPlay.tooltip(ABP.Strings.play),_=!1,f(l.videoDiv,"ABP-HideCursor")}),e[t]("waiting",function(){l.cmManager.stopTimer(),l.cmManager.pauseComment(),_=!1}),e[t]("playing",function(){l.cmManager.startTimer(),l.cmManager.resumeComment(),_=!0})}},null!==i&&null!==i.getElementsByClassName){l.defaults.w=i.offsetWidth,l.defaults.h=i.offsetHeight;var r=i.getElementsByClassName("ABP-Video");if(!(r.length<=0)){var y=null;l.videoDiv=r[0];for(var b in r[0].children)if(null!=r[0].children[b].tagName&&"VIDEO"===r[0].children[b].tagName.toUpperCase()){y=r[0].children[b];break}var S=r[0].getElementsByClassName("ABP-Container");if(S.length>0&&(l.divComment=S[0]),null!==y){l.video=y,l.video.seek=function(e){this.currentTime=parseFloat(e)/1e3};var k=i.getElementsByClassName("ABP-Play");if(!(k.length<=0)){l.btnPlay=k[0],l.btnPlay.tooltip(ABP.Strings.play),p(l.btnPlay);var B=i.getElementsByClassName("progress-bar");if(!(B.length<=0)){var P=B[0].getElementsByClassName("bar");l.barTimeHitArea=P[0],l.barLoad=P[0].getElementsByClassName("load")[0],l.barTime=P[0].getElementsByClassName("dark")[0];var C=i.getElementsByClassName("time-label");if(!(C.length<=0)){l.timeLabel=C[0];var A=i.getElementsByClassName("ABP-Volume");if(!(A.length<=0)){l.btnVolume=A[0],l.btnVolume.tooltip(ABP.Strings.mute),p(l.btnVolume);var N=i.getElementsByClassName("volume-bar");if(!(N.length<=0)){var x=N[0].getElementsByClassName("bar");l.barVolumeHitArea=x[0],l.barVolume=x[0].getElementsByClassName("load")[0];var w=i.getElementsByClassName("opacity-bar");if(!(w.length<=0)){var w=w[0].getElementsByClassName("bar");l.barOpacityHitArea=w[0],l.barOpacity=w[0].getElementsByClassName("load")[0];var T=i.getElementsByClassName("scale-bar");if(!(T.length<=0)){var T=T[0].getElementsByClassName("bar");l.barScaleHitArea=T[0],l.barScale=T[0].getElementsByClassName("load")[0];var M=i.getElementsByClassName("speed-bar");if(!(M.length<=0)){var M=M[0].getElementsByClassName("bar");l.barSpeedHitArea=M[0],l.barSpeed=M[0].getElementsByClassName("load")[0];var H=i.getElementsByClassName("playSpeed-bar");if(!(H.length<=0)){var H=H[0].getElementsByClassName("bar");l.barPlaySpeedHitArea=H[0],l.barPlaySpeed=H[0].getElementsByClassName("load")[0],i.querySelector(".play-speed-reset")[t]("click",function(){l.video.playbackRate=1});var F=i.getElementsByClassName("prop-checkbox");if(!(F.length<=0)){l.btnAutoOpacity=F[1],l.btnAutoOpacity.tooltip(ABP.Strings.autoOpacityOff),p(l.btnAutoOpacity),l.btnProp=F[0];var D=i.getElementsByClassName("ABP-FullScreen");if(!(D.length<=0)){l.btnFull=D[0],l.btnFull.tooltip(ABP.Strings.fullScreen),p(l.btnFull);var L=i.getElementsByClassName("ABP-Web-FullScreen");if(!(L.length<=0)){l.btnWebFull=L[0],l.btnWebFull.tooltip(ABP.Strings.webFull),p(l.btnWebFull);var E=i.getElementsByClassName("ABP-WideScreen");if(!(E.length<=0)){l.btnWide=E[0],l.btnWide.tooltip(ABP.Strings.wideScreen),p(l.btnWide);var O=i.getElementsByClassName("ABP-Comment-Font");if(!(O.length<=0)){l.btnFont=O[0],l.btnFont.tooltip(ABP.Strings.sendStyle),p(l.btnFont);var I=i.getElementsByClassName("ABP-Comment-Color");if(!(I.length<=0)){l.btnColor=I[0],l.btnColor.tooltip(ABP.Strings.sendColor),p(l.btnColor);var z=i.getElementsByClassName("ABP-Comment-Color-Display");if(!(z.length<=0)){l.displayColor=z[0];var V=i.getElementsByClassName("ABP-Comment-Input");if(!(V.length<=0)){l.txtText=V[0];var W=i.getElementsByClassName("ABP-Comment-List-Container-Inner");if(!(W.length<=0)){l.commentListContainer=W[0];var R=i.getElementsByClassName("ABP-Comment-Send");if(!(R.length<=0)){l.btnSend=R[0],l.btnSend.tooltip(ABP.Strings.sendTooltip),p(l.btnSend);var q=i.getElementsByClassName("ABP-Control");q.length>0&&(l.controlBar=q[0]);var U=i.getElementsByClassName("ABP-CommentShow");if(!(U.length<=0)){l.btnDm=U[0],l.btnDm.tooltip(ABP.Strings.hideComment),p(l.btnDm);var j=i.getElementsByClassName("ABP-Loop");if(!(j.length<=0)){l.btnLoop=j[0],l.btnLoop.tooltip(ABP.Strings.loopOff),p(l.btnLoop);var X={videoDimension:!0,gecko:!0,webkit:!0,videoQuality:!0,flvjs:!0},J=function(e){return document.querySelector(e)},Y=function(e){return(1*e).toFixed(2)},Q=">:last-child",G=J("#player-dimension"+Q),K=J("#video-dimension"+Q),Z=J("#buffer-health-column"),$=J("#realtime-bitrate-column"),ee=J("#download-speed-column"),te=[],ie=[],ae=[],oe=J("#buffer-health"+Q),ne='<svg style="width:180px;height:21px"><polyline style="fill:transparent;stroke:#ccc"></polyline><polyline points="1,21 180,21 180,1" style="fill:transparent;stroke:#fff"></polyline></svg>',le="",se=document.createElement("style"),re=document.createElement("style"),ce=document.querySelectorAll(".flvjs>:last-child"),b=0,de=function(e,t){var i,a=0,o=[];t.forEach(function(e){a=e>a?e:a}),0==a&&(a=1);for(i in t)isNaN(t[i])&&(t[i]=0),o.push(3*i+","+(20*(1-t[i]/a)+1)+" "+(3*i+3)+","+(20*(1-t[i]/a)+1));e.setAttribute("points",o.join(" "))},me=!1,pe=J("#Player-Stats-Toggle"),ue=function(e){"stats-close"==e.target.id&&e.stopPropagation(),J(".Player-Stats").style.display=me?"":"block",me=!me},ve=-1,fe=0;for(pe[t]("click",ue),J("#stats-close")[t]("click",ue);60>b;b++)te.push(0),ie.push(0),ae.push(0);if(Z.innerHTML=ne,Z=Z.querySelector("polyline"),
$.innerHTML=ne,$=$.querySelector("polyline"),ee.innerHTML=ne,ee=ee.querySelector("polyline"),void 0==y.videoWidth&&(X.videoDimension=!1,le+="#video-dimension{display:none}"),void 0==y.mozDecodedFrames&&(X.gecko=!1,le+=".gecko{display:none}"),void 0==y.webkitDecodedFrameCount&&(X.webkit=!1,le+=".webkit{display:none}"),void 0==y.getVideoPlaybackQuality&&(X.videoQuality=!1,le+=".videoQuality{display:none}"),se.innerHTML=le,document.head.appendChild(se),re.innerHTML=".flvjs{display:none}",document.head.appendChild(re),void 0==window.flvplayer&&(X.flvjs=!1),setInterval(function(){fe^=1,G.innerHTML=y.offsetWidth+"x"+y.offsetHeight+" *"+devicePixelRatio,X.videoDimension&&(K.innerHTML=y.videoWidth+"x"+y.videoHeight);var e={};try{e=h(y)}catch(e){}if(e=e.delta||0,te.push(e),te.shift(),oe.innerHTML=Y(e)+"s",me&&de(Z,te),me){for(var t,i,a=y.buffered,o=J("#buffer-clips>span"),n=y.duration==1/0?a.end(a.length-1):y.duration,l=[],s=0;s<a.length;s++)s>=o.childNodes.length&&o.appendChild(_("span",{className:"buffer-clip"})),t=a.start(s),i=a.end(s)-t,o.childNodes[s].style.left=Y(t/n*100)+"%",o.childNodes[s].style.width=Y(i/n*100)+"%",l.push(d(0|t)+" - "+d(t+i|0));for(;s<o.childNodes.length;)o.childNodes[s].remove();o.parentNode.parentNode.childNodes[2].innerHTML=l.join("\n"),J("#buffer-clips>span>div").style.left=Y(y.currentTime/n*100)+"%"}if(X.flvjs)if(flvplayer._mediaInfo){re.innerHTML="";var r,c,s=0,m=flvplayer._mediaInfo,p=flvplayer.statisticsInfo,u=y.currentTime,v=flvplayer._mediaDataSource.segments,f=0,g=0;for(c=0;c<v.length;c++){if(u<=(f+v[c].duration)/1e3){f=u-f/1e3|0;break}f+=v[c].duration,g++}c>=v.length&&(c=v.length-1);var b=v[c].filesize,S=v[c].duration;J("#mimeType>:last-child").innerHTML=m.mimeType,ce[s++].innerHTML=Y(m.fps),ce[s++].innerHTML=Y(m.videoDataRate)+" kbps",ce[s++].innerHTML=Y(m.audioDataRate)+" kbps",ce[s++].innerHTML=Y(b/S*8)+" kbps",m.bitrateMap?(m.bitrateMap[g]&&(r=m.bitrateMap[g][f]),void 0!=r?fe&&ve!=(0|y.currentTime)?(ve=0|y.currentTime,ce[s++].innerHTML=Y(r)+" kbps",ie.push(r),ie.shift(),me&&de($,ie)):s++:ce[s++].innerHTML="N/A"):ce[s++].innerHTML="N/A",fe&&(ae.push(p.speed),ae.shift(),me&&de(ee,ae),ce[s++].innerHTML=Y(p.speed)+" KB/s",flvplayer._statisticsInfo.speed=0)}else re.innerHTML=".flvjs{display:none}",J("#mimeType>:last-child").innerHTML="video/mp4";if(window.overallBitrate?(J("#overall-bitrate").parentNode.style.display="",J("#overall-bitrate").innerHTML=Y(overallBitrate)+" kbps"):J("#overall-bitrate").parentNode.style.display="none",X.gecko&&["mozParsedFrames","mozDecodedFrames","mozPaintedFrames"].forEach(function(e){J("#"+e).innerHTML=y[e]}),X.webkit&&["webkitDecodedFrameCount","webkitDroppedFrameCount"].forEach(function(e){J("#"+e).innerHTML=y[e]}),X.videoQuality){var k=y.getVideoPlaybackQuality();J("#totalVideoFrames").innerHTML=k.totalVideoFrames,J("#droppedVideoFrames").innerHTML=k.droppedVideoFrames}},500),"undefined"!=typeof CommentManager&&(l.cmManager=new CommentManager(l.divComment),l.cmManager.display=!0,l.cmManager.init(),l.cmManager.clear(),l.cmManager.filter.addModifier(shield.filter),window&&window[t]("resize",function(){l.cmManager.setBounds()})),"object"==typeof ABP.playerConfig&&(ABP.playerConfig.volume&&(l.video.volume=ABP.playerConfig.volume),ABP.playerConfig.opacity&&(l.cmManager.options.global.opacity=ABP.playerConfig.opacity)),e(".ABP-Comment-List-Title *").click(function(){var t=e(this).attr("item"),i=e(this).hasClass("asc")?"desc":"asc";e(".ABP-Comment-List-Title *").removeClass("asc").removeClass("desc"),e(this).addClass(i),l.loadCommentList(t,i)}),e(".ABP-Unit .ABP-CommentStyle .ABP-Comment-FontOption .style-option").click(function(){e(this).closest(".style-select").find(".style-option").removeClass("on"),e(this).addClass("on"),l[e(this).closest(".style-select").attr("name")]=parseInt(e(this).attr("value"))}),e(i).find(".ABP-Comment-ColorPicker").colpick({flat:!0,submit:0,color:"ffffff",onChange:function(e,t){l.commentColor=t,l.displayColor.style.backgroundColor="#"+t}}),y.isBound!==!0){l.swapVideo(y),l.playerUnit.querySelector(".BiliPlus-Scale-Menu .Video-Defination")[t]("click",function(e){if(!e.target.hasAttribute("changeto"))return!1;var t=JSON.parse(e.target.getAttribute("changeto"));changeSrc({target:{value:t[1]}},t[0]),f(e.target.parentNode.querySelector(".on"),"on"),u(e.target,"on")}),l.playerUnit.querySelector(".BiliPlus-Scale-Menu .Video-Scale")[t]("click",function(e){if(!e.target.hasAttribute("changeto"))return!1;switch(e.target.getAttribute("changeto")){case"default":v(l.video,"scale")&&f(l.video,"scale"),l.video.style.width="",l.video.style.height="",l.video.style.paddingTop="",l.video.style.paddingLeft="";break;case"16_9":u(l.video,"scale");var t=l.videoDiv.offsetWidth,i=l.videoDiv.offsetHeight,a="",o="";i/9*16>t?(a=(i-t/16*9)/2+"px",i=t/16*9/i*100+"%",t="100%"):(o=(t-i/9*16)/2+"px",t=i/9*16/t*100+"%",i="100%"),l.video.style.width=t,l.video.style.height=i,l.video.style.paddingTop=a,l.video.style.paddingLeft=o;break;case"4_3":u(l.video,"scale");var t=l.videoDiv.offsetWidth,i=l.videoDiv.offsetHeight,a="",o="";i/3*4>t?(a=(i-t/4*3)/2+"px",i=t/4*3/i*100+"%",t="100%"):(o=(t-i/3*4)/2+"px",t=i/3*4/t*100+"%",i="100%"),l.video.style.width=t,l.video.style.height=i,l.video.style.paddingTop=a,l.video.style.paddingLeft=o;break;case"full":u(l.video,"scale"),l.video.style.width="",l.video.style.height="",l.video.style.paddingTop="",l.video.style.paddingLeft=""}f(e.target.parentNode.querySelector(".on"),"on"),u(e.target,"on")});var ge=!1;y[t]("autoPlayFailed",function(){ge=!0});var he,_e=0,ye=function(e){var t=Date.now();500>=t-_e?(l.btnFull.click(),200>=t-_e?clearTimeout(he):l.btnPlay.click()):ge?(l.btnPlay.click(),ge=!1):he=setTimeout(function(){l.btnPlay.click()},250),_e=t,e.preventDefault()};l.videoDiv[t]("click",ye),l.playerUnit.querySelector(".ABP-Bottom-Extend")[t]("click",function(e){e.preventDefault(),e.stopPropagation(),ye(e)});var be=setTimeout(function(){u(l.videoDiv,"ABP-HideCursor")},3e3);l.videoDiv[t]("mousemove",function(e){o(e)&&(be&&clearTimeout(be),v(l.videoDiv,"ABP-HideCursor")&&f(l.videoDiv,"ABP-HideCursor"),be=setTimeout(function(){u(l.videoDiv,"ABP-HideCursor")},3e3))}),l.btnVolume[t]("click",function(){if(0==l.video.muted){if(l.video.muted=!0,0==l.video.muted)return void this.tooltip(ABP.Strings.muteNotSupported);this.className="button ABP-Volume icon-volume-mute2",this.tooltip(ABP.Strings.unmute),l.barVolume.style.width="0%"}else l.video.muted=!1,this.className="button ABP-Volume icon-volume-",this.className+=l.video.volume<.1?"mute":l.video.volume<.33?"low":l.video.volume<.67?"medium":"high",this.tooltip(ABP.Strings.mute),l.barVolume.style.width=100*l.video.volume+"%"}),l.btnWebFull[t]("click",function(){l.state.fullscreen=v(i,"ABP-FullScreen"),u(i,"ABP-FullScreen"),l.btnFull.className="button ABP-FullScreen icon-screen-normal",l.btnFull.tooltip(ABP.Strings.exitWebFull),l.state.fullscreen=!0,l.cmManager&&l.cmManager.setBounds(),l.state.allowRescale&&(l.state.fullscreen?l.defaults.w>0&&(l.cmManager.options.scrollScale=i.offsetWidth/l.defaults.w):l.cmManager.options.scrollScale=1)});var Se=!1,ke=!1;l.btnFont[t]("click",function(){ke&&l.btnColor.click(),this.parentNode.classList.toggle("on"),Se=!Se}),l.btnColor[t]("click",function(){Se&&l.btnFont.click(),this.parentNode.classList.toggle("on"),ke=!ke});var Be=function(){localStorage.YHP_PlayerSettings=JSON.stringify({volume:l.video.volume,opacity:l.cmManager.options.global.opacity,scale:l.commentScale,speed:l.commentSpeed,commentVisible:l.cmManager.display,useCSS:l.cmManager.options.global.useCSS,autoOpacity:l.cmManager.options.global.autoOpacity})};l.btnAutoOpacity[t]("click",function(){this.classList.toggle("on");var e=this.classList.contains("on");l.cmManager.autoOpacity(e),this.tooltip(e?ABP.Strings.autoOpacityOn:ABP.Strings.autoOpacityOff),Be()}),ABP.playerConfig.autoOpacity&&l.btnAutoOpacity.click(),l.btnProp[t]("click",function(){});var Pe=function(){!document.isFullScreen()&&v(i,"ABP-FullScreen")&&(f(i,"ABP-FullScreen"),l.btnFull.className="button ABP-FullScreen icon-screen-full",l.btnFull.tooltip(ABP.Strings.fullScreen),l.state.fullscreen=!!document.isFullScreen())};document[t]("fullscreenchange",Pe,!1),document[t]("webkitfullscreenchange",Pe,!1),document[t]("mozfullscreenchange",Pe,!1),document[t]("MSFullscreenChange",Pe,!1),l.btnFull[t]("click",function(){l.state.fullscreen=v(i,"ABP-FullScreen"),l.state.fullscreen?(f(i,"ABP-FullScreen"),this.className="button ABP-FullScreen icon-screen-full",this.tooltip(ABP.Strings.fullScreen),document.exitFullscreen()):(u(i,"ABP-FullScreen"),this.className="button ABP-FullScreen icon-screen-normal",this.tooltip(ABP.Strings.exitFullScreen),i.requestFullScreen()),l.state.fullscreen=!l.state.fullscreen,l.cmManager&&l.cmManager.setBounds(),l.state.allowRescale&&(l.state.fullscreen?l.defaults.w>0&&(l.cmManager.options.scrollScale=i.offsetWidth/l.defaults.w):l.cmManager.options.scrollScale=1)}),l.btnWide[t]("click",function(){l.state.widescreen=v(i,"ABP-WideScreen"),l.state.widescreen?(f(i,"ABP-WideScreen"),this.className="button ABP-WideScreen icon-tv",i.dispatchEvent(new Event("normal")),this.tooltip(ABP.Strings.wideScreen)):(u(i,"ABP-WideScreen"),this.className="button ABP-WideScreen icon-tv on",i.dispatchEvent(new Event("wide")),this.tooltip(ABP.Strings.exitWideScreen)),l.state.widescreen=!l.state.widescreen,l.cmManager&&l.cmManager.setBounds(),l.state.allowRescale&&(l.state.fullscreen?l.defaults.w>0&&(l.cmManager.options.scrollScale=i.offsetWidth/l.defaults.w):l.cmManager.options.scrollScale=1)}),l.btnDm[t]("click",function(){0==l.cmManager.display?(l.cmManager.display=!0,l.cmManager.startTimer(),this.className="button ABP-CommentShow icon-comment on",this.tooltip(ABP.Strings.hideComment)):(l.cmManager.display=!1,l.cmManager.clear(),l.cmManager.stopTimer(),this.className="button ABP-CommentShow icon-comment",this.tooltip(ABP.Strings.showComment)),Be()}),ABP.playerConfig.commentVisible||l.btnDm.click(),l.btnLoop[t]("click",function(){0==l.video.loop?(l.video.loop=!0,this.className="button ABP-Loop icon-loop on",this.tooltip(ABP.Strings.loopOn)):(l.video.loop=!1,this.className="button ABP-Loop icon-loop",this.tooltip(ABP.Strings.loopOff)),l.video.dispatchEvent(new CustomEvent("loop"))});var Ce,Ae,Ne,xe=l.playerUnit.querySelector(".Context-Menu"),we=xe.querySelector(".Context-Menu-Background"),Te=xe.querySelector(".Context-Menu-Body"),Me=function(e){return We?(e.preventDefault(),e.stopPropagation(),We=!1,!1):(xe.style.display="none",void e.preventDefault())},He=null,Fe=0,De=null,Le={},Ee=function(){shield.addText(this.getAttribute("data-text"))},Oe=function(){shield.addUser(this.getAttribute("data-mid"))},Ie=function(){shield.addColor(this.getAttribute("data-color"))},ze=function(e,i,a){xe.style.display="block";var o,n,s,r,c,d=Te.querySelectorAll(".dm"),m=l.playerUnit.getBoundingClientRect();for(b=d.length-2;b>=0;b--)"dm static"!=d[b].className&&d[b].remove();for(o=Te.firstChild,b=0;b<a.length;b++){for(n=a[b].originalData,s=n.color.toString(16);s.length<6;)s="0"+s;if(r=16777215==n.color,c=_("div",{className:"dm"},[_("div",{className:"content"},[_("text",n.text)]),_("div",{className:"dmMenu"},[_("div",{"data-content":n.text},[_("text",ABP.Strings.copyComment)]),_("div",{"data-text":n.text},[_("text",ABP.Strings.blockContent+"“"+n.text+"”")]),_("div",{"data-mid":n.hash},[_("text",ABP.Strings.blockUser+""+n.hash)]),_("div",r?{}:{"data-color":s},[_("text",r?ABP.Strings.blockColorWhite:ABP.Strings.blockColor+""),_("div",{className:"color",style:{background:"#"+s}})])])]),n.mode>6){c.childNodes[0].innerHTML="特殊弹幕";var p=c.childNodes[1];p.childNodes[0].style.display="none",p.childNodes[2].style.display="none",p.childNodes[4].style.display="none"}Te.insertBefore(c,o)}var u=Te.querySelectorAll(".dmMenu");for(b=0;b<u.length-1;b++)v(u[b].parentNode,"static")||(u[b].childNodes[0][t]("click",function(){try{var e=document.createElement("input");e.style.width=0,e.style.height=0,document.body.appendChild(e),e.value=this.getAttribute("data-content"),e.select();var t=document.execCommand("copy");if(document.body.removeChild(e),!t)throw""}catch(e){l.createPopup(ABP.Strings.copyFail,3e3)}}),u[b].childNodes[1][t]("click",Ee),u[b].childNodes[2][t]("click",Oe),u[b].childNodes[3][t]("click",Ie));e-=m.left,i-=m.top,m.width-e<300&&(e=m.width-300),m.height-Te.offsetHeight-i<0&&(i=m.height-Te.offsetHeight);var f=Te.querySelector(".dm:nth-last-of-type(2)>.dmMenu");if(null!=f){f.style.display="block";var g=f.getBoundingClientRect();f.style.display="",m.top+m.height-g.height-i<0&&(i=m.height-g.height)}Te.style.left=e+"px",Te.style.top=i+"px"},Ve=null,We=!1,Re=!1,qe=!1,Ue=!1,je=null;Te.querySelector("#Player-Speed-Control .dmMenu")[t]("click",function(e){var t=e.target.getAttribute("data-speed");void 0!=t&&(l.video.playbackRate=t)}),Te[t]("senderInfoFetched",function(e){var i=e.detail;if(i.mid==Fe&&null!=De){var a=De.parentNode.getBoundingClientRect(),o=a.left-150,n=innerHeight-a.bottom,l=_("div",{className:"Context-Menu-Body",id:"Sender-Info",style:{left:o+"px",bottom:n+"px",position:"fixed",fontFamily:"-apple-system,Arial,'PingFang SC','STHeiti Light','Hiragino Kaku Gothic ProN','Microsoft YaHei'",textAlign:"center"}},[_("div",{},[_("img",{style:{height:"130px",width:"130px"},src:i.face.replace(/http\:/,"")})]),_("div",{},[_("text",i.name)]),_("div",{},[_("text",i.mid)]),_("div",{},[_("text","LV"+i.level_info.current_level)])]);document.body.appendChild(l),n+l.offsetHeight>innerHeight&&(l.style.bottom="",l.style.top=a.top+"px"),l[t]("click",function(){window.open("/space/"+i.mid+"/"),document.body.removeChild(l)}),l[t]("mouseenter",function(){clearTimeout(He)}),l[t]("mouseleave",function(){clearTimeout(He),He=setTimeout(function(){document.body.removeChild(document.getElementById("Sender-Info"))},500)})}}),window.getSenderInfo=function(e){0==e.code&&(Le[Fe]=e.card,Te.dispatchEvent(new CustomEvent("senderInfoFetched",{detail:e.card})))},xe[t]("click",Me),we[t]("contextmenu",Me),l.videoDiv.parentNode[t]("contextmenu",function(e){e.preventDefault(),e.stopPropagation();var t=l.divComment.getBoundingClientRect(),i=e.clientX,a=e.clientY;ze(i,a,l.cmManager.getCommentFromPoint(i-t.left,a-t.top))}),l.commentListContainer[t]("contextmenu",function(e){var t=e.target.parentNode.data;return void 0==t?!1:(e.preventDefault(),e.stopPropagation(),void ze(e.clientX,e.clientY,[t]))}),l.videoDiv.parentNode[t]("touchstart",function(e){if(Re=!1,qe=!1,Ne=l.video.currentTime,We=!1,e.touches.length>1&&null!=Ve)return clearTimeout(Ve),void(Ve=null);var t=l.divComment.getBoundingClientRect(),i=e.touches[0].clientX,a=e.touches[0].clientY,o=l.cmManager.getCommentFromPoint(i-t.left,a-t.top);Ce=i,Ae=a,Ve=setTimeout(function(){qe=!0,Ve=null,We=!0,ze(i,a,o)},300)}),l.playerUnit.querySelector(".shield").addEventListener("touchstart touchmove touchend",function(e){e.stopPropagation()}),l.videoDiv.parentNode[t]("touchmove",function(e){null!=Ve&&(clearTimeout(Ve),Ve=null);var t=e.touches[0].clientX,i=e.touches[0].clientY,a=t-Ce,o=i-Ae,n=l.videoDiv.getBoundingClientRect(),s=(n.width,n.height);if(Re){var r=0,c=a>0?1:0,m=["Low","Med","High"],p=l.video.duration;s/3>i?Ne+=.2*a:2*s/3>i?(Ne+=.6*a,r=1):(Ne+=1.5*a,r=2),Ne=0>Ne?0:Ne>p?p:Ne,Ce+=a,Ce-n.left<50||n.right-Ce<50?(document.querySelector(".Drag-Icon").className="Drag-Icon cancel",J(".Drag-Speed").innerHTML=ABP.Strings.dragControlCancel,J(".Drag-Time").innerHTML="　",Ue=!0):(document.querySelector(".Drag-Icon").className="Drag-Icon "+(c?"forward":"rewind"),J(".Drag-Speed").innerHTML=ABP.Strings["dragControl"+m[r]+(c?"Inc":"Dec")],J(".Drag-Time").innerHTML=d(Ne)+"╱"+d(p),Ue=!1,p>0&&(document.querySelector(".Drag-Time-Bar .fill").style.width=Ne/p*100+"%"))}else qe||(-10>a||a>10?(Re=!0,null!=je&&(clearTimeout(je),je=null),J(".Drag-Control").style.display="block"):(-10>o||o>10)&&(qe=!0))}),l.videoDiv.parentNode[t]("touchend",function(){null!=Ve&&(clearTimeout(Ve),Ve=null),Re&&!Ue&&(l.video.currentTime=Ne),je=setTimeout(function(){J(".Drag-Control").style.display="none"},1e3)}),Te[t]("touchstart",function(e){var t=Te.getBoundingClientRect();e.touches[0].clientX-t.left<=t.width&&e.touches[0].clientY-t.top<=t.height&&(We=!0)});var Xe=function(){var e=new Date,t=""+e.getTime()+Math.random();return""==l.txtText.value||l.txtText.disabled?!1:(l.playerUnit.dispatchEvent(new CustomEvent("sendcomment",{detail:{id:t,message:l.txtText.value,fontsize:l.commentFontSize,color:parseInt("0x"+l.commentColor),date:e.getFullYear()+"-"+s(e.getMonth())+"-"+s(e.getDay())+" "+s(e.getHours())+":"+s(e.getMinutes())+":"+s(e.getSeconds()),playTime:l.video.currentTime,mode:l.commentMode,pool:0}})),l.cmManager.send({text:l.txtText.value,mode:l.commentMode,stime:l.video.currentTime,size:l.commentFontSize,color:parseInt("0x"+l.commentColor),border:!0}),l.commentList[t]={date:parseInt(e.getTime()/1e3),time:1e3*l.video.currentTime,mode:l.commentMode,user:"-",pool:0,content:l.txtText.value},l.txtText.value="",l.txtText.disabled=!0,void setTimeout(function(){l.txtText.disabled=!1},l.commentCoolDown))};l.txtText.parentNode[t]("submit",function(e){return e.preventDefault(),Xe(),!1}),l.btnSend[t]("click",Xe),l.timeLabel[t]("click",function(){l.timeJump=_("input",{className:"time-jump"}),l.timeJump.value=d(l.video.currentTime),l.controlBar.appendChild(l.timeJump),l.timeJump[t]("blur",function(){l.timeJump&&l.timeJump.parentNode.removeChild(l.timeJump),l.timeJump=null}),l.timeJump[t]("keydown",function(e){if(13==e.keyCode){var t=m(l.timeJump.value);t&&t<=l.video.duration&&(l.video.currentTime=t,l.video.paused&&l.btnPlay.click()),l.timeJump.parentNode.removeChild(l.timeJump)}else(e.keyCode<48||e.keyCode>59)&&(e.keyCode<96||e.keyCode>105)&&8!=e.keyCode&&16!=e.keyCode&&37!=e.keyCode&&39!=e.keyCode&&46!=e.keyCode&&e.preventDefault()}),l.timeJump.focus(),l.timeJump.select()}),l.barTime.style.width="0%";var Je=!1;l.barTimeHitArea[t]("mousedown",function(){Je=!0});var Ye={imgs:[],data:[],len:[0,0],size:[0,0]},Qe=function(e){if(0!=e.code)return!1;Ye.imgs=JSON.parse(JSON.stringify(e.data.image).replace(/http:/g,"https:")),Ye.len=[e.data.img_x_len,e.data.img_y_len],Ye.size=[e.data.img_x_size,e.data.img_y_size];for(var t=0,i=[];t<100*Ye.imgs.length;t++)i.push(t*e.data.step);Ye.data=i},Ge=!1;l.barTimeHitArea[t]("mouseenter",function(){Ge=!0}),l.barTimeHitArea[t]("mouseleave",function(){Ge=!1}),l.playerUnit[t]("previewData",function(e){Qe(e.detail)}),document[t]("mouseup",function(e){if(Je){var t=(e.clientX-l.barTimeHitArea.getBoundingClientRect().left)/l.barTimeHitArea.offsetWidth*l.video.duration;0>t&&(t=0),Math.abs(t-l.video.currentTime)>4&&l.cmManager&&l.cmManager.clear(),l.video.currentTime=t}Je=!1});var Ke=function(e){l.barTime.style.width=e/y.duration*100+"%",l.timeLabel.innerHTML=d(e)+" / "+d(y.duration)};document[t]("mousemove",function(e){var t=(e.clientX-l.barTimeHitArea.getBoundingClientRect().left)/l.barTimeHitArea.offsetWidth*l.video.duration;if(0>t&&(t=0),t>l.video.duration&&(t=l.video.duration),Ye.data.length>0&&null!=n("ABP-Tooltip")&&Ge){var i;for(i=0;i<Ye.data.length;i++)if(t<Ye.data[i]){i--;break}var a=Math.floor(i/100),o=Math.floor(i%100/10),s=i%10,r=n("preview-container"),c=n("ABP-Tooltip");null==r&&(r=_("div",{id:"preview-container",style:{position:"absolute","background-size":Ye.size[0]+"px "+Ye.size[1]+"px",width:Ye.size[0]+"px",height:Ye.size[1]+"px",background:"rgba(0,0,0,0)",display:"none"}}),c.parentNode.insertBefore(r,c)),r.style.left=c.offsetLeft+(c.offsetWidth-Ye.size[0])/2+"px",r.style.top=c.offsetTop+(c.offsetHeight-Ye.size[1])+"px",r.style.display="block",r.style.backgroundImage='url("'+Ye.imgs[a]+'")',r.style.backgroundPosition="-"+s*Ye.size[0]+"px -"+o*Ye.size[1]+"px"}null==n("ABP-Tooltip")&&null!=n("preview-container")&&(n("preview-container").style.display="none"),l.barTimeHitArea.tooltip(d(t)),Je&&Ke(t)}),p(l.barTimeHitArea,!0,-12);var Ze=!1;l.barVolumeHitArea[t]("mousedown",function(){Ze=!0}),l.barVolume.style.width=100*l.video.volume+"%";var $e=function(e){l.barVolume.style.width=100*e+"%",l.video.muted=!1,l.btnVolume.className="button ABP-Volume icon-volume-",l.btnVolume.className+=.1>e?"mute":.33>e?"low":.67>e?"medium":"high",l.btnVolume.tooltip(ABP.Strings.mute),l.barVolumeHitArea.tooltip(parseInt(100*e)+"%"),Be()};document[t]("mouseup",function(e){if(Ze){var t=(e.clientX-l.barVolumeHitArea.getBoundingClientRect().left)/l.barVolumeHitArea.offsetWidth;0>t&&(t=0),t>1&&(t=1),l.video.volume=t,$e(l.video.volume)}Ze=!1}),document[t]("mousemove",function(e){var t=(e.clientX-l.barVolumeHitArea.getBoundingClientRect().left)/l.barVolumeHitArea.offsetWidth;0>t&&(t=0),t>1&&(t=1),Ze?(l.video.volume=t,$e(l.video.volume)):l.barVolumeHitArea.tooltip(parseInt(100*t)+"%")}),p(l.barVolumeHitArea,!0,-12);var et=!1;l.barOpacityHitArea[t]("mousedown",function(){et=!0}),l.barOpacity.style.width=100*l.cmManager.options.global.opacity+"%";var tt=function(e){l.barOpacity.style.width=100*e+"%",l.barOpacityHitArea.tooltip(parseInt(100*e)+"%"),Be()};document[t]("mouseup",function(e){if(et){var t=(e.clientX-l.barOpacityHitArea.getBoundingClientRect().left)/l.barOpacityHitArea.offsetWidth;0>t&&(t=0),t>1&&(t=1),l.cmManager.options.global.opacity=t,tt(l.cmManager.options.global.opacity),Be()}et=!1}),document[t]("mousemove",function(e){var t=(e.clientX-l.barOpacityHitArea.getBoundingClientRect().left)/l.barOpacityHitArea.offsetWidth;0>t&&(t=0),t>1&&(t=1),et?(l.cmManager.options.global.opacity=t,tt(l.cmManager.options.global.opacity)):l.barOpacityHitArea.tooltip(parseInt(100*t)+"%")}),p(l.barOpacityHitArea,!0,-6);var it=!1;l.barScaleHitArea[t]("mousedown",function(){it=!0}),l.barScale.style.width=(l.commentScale-.2)/1.8*100+"%";var at=function(e){l.barScale.style.width=(e-.2)/1.8*100+"%",l.barScaleHitArea.tooltip(parseInt(100*e)+"%"),l.cmManager.setBounds(),Be()};document[t]("mouseup",function(e){if(it){var t=.2+1.8*(e.clientX-l.barScaleHitArea.getBoundingClientRect().left)/l.barScaleHitArea.offsetWidth;.2>t&&(t=.2),t>2&&(t=2),l.commentScale=t,at(l.commentScale),Be()}it=!1}),document[t]("mousemove",function(e){var t=.2+1.8*(e.clientX-l.barScaleHitArea.getBoundingClientRect().left)/l.barScaleHitArea.offsetWidth;.2>t&&(t=.2),t>2&&(t=2),it?(l.commentScale=t,at(l.commentScale)):l.barScaleHitArea.tooltip(parseInt(100*t)+"%")}),p(l.barScaleHitArea,!0,-6);var ot=!1;l.barSpeedHitArea[t]("mousedown",function(){ot=!0}),l.barSpeed.style.width=(l.commentSpeed-.5)/1.5*100+"%";var nt=function(e){l.barSpeed.style.width=(e-.5)/1.5*100+"%",l.barSpeedHitArea.tooltip(parseInt(100*e)+"%"),l.cmManager.setBounds(),Be()};document[t]("mouseup",function(e){if(ot){var t=.5+1.5*(e.clientX-l.barSpeedHitArea.getBoundingClientRect().left)/l.barSpeedHitArea.offsetWidth;.5>t&&(t=.5),t>2&&(t=2),l.commentSpeed=t,nt(l.commentSpeed),Be()}ot=!1}),document[t]("mousemove",function(e){var t=.5+1.5*(e.clientX-l.barSpeedHitArea.getBoundingClientRect().left)/l.barSpeedHitArea.offsetWidth;.5>t&&(t=.5),t>2&&(t=2),ot?(l.commentSpeed=t,nt(l.commentSpeed)):l.barSpeedHitArea.tooltip(parseInt(100*t)+"%")}),p(l.barSpeedHitArea,!0,-6);var lt=!1;l.barPlaySpeedHitArea[t]("mousedown",function(){lt=!0}),l.barPlaySpeed.style.width=(l.video.playbackRate-.5)/1.5*100+"%";var st=function(e){l.barPlaySpeed.style.width=(e-.5)/1.5*100+"%",l.barPlaySpeedHitArea.tooltip(e.toFixed(2)+"x")};document[t]("mouseup",function(e){if(lt){var t=.5+1.5*(e.clientX-l.barPlaySpeedHitArea.getBoundingClientRect().left)/l.barPlaySpeedHitArea.offsetWidth;.5>t&&(t=.5),t>2&&(t=2),l.video.playbackRate=t}lt=!1}),document[t]("mousemove",function(e){var t=.5+1.5*(e.clientX-l.barPlaySpeedHitArea.getBoundingClientRect().left)/l.barPlaySpeedHitArea.offsetWidth;.5>t&&(t=.5),t>2&&(t=2),lt?l.video.playbackRate=t:l.barPlaySpeedHitArea.tooltip(t.toFixed(2)+"x")}),p(l.barPlaySpeedHitArea,!0,-6),l.btnPlay[t]("click",function(){l.video.paused?l.video.play():l.video.pause()}),i[t]("keydown",function(e){if(e&&"INPUT"!=document.activeElement.tagName)switch(-1!=[27,32,37,38,39,40].indexOf(e.keyCode)&&e.preventDefault(),e.keyCode){case 27:abpinst.state.fullscreen&&abpinst.btnFull.click();break;case 32:l.btnPlay.click();break;case 37:var t=l.video.currentTime-=5*l.video.playbackRate;l.cmManager.clear(),0>t&&(t=0),l.video.currentTime=t.toFixed(3),l.video.paused&&l.btnPlay.click(),Ke(y.currentTime),l.barTimeHitArea.tooltip(d(y.currentTime));break;case 39:var t=l.video.currentTime+=5*l.video.playbackRate;l.cmManager.clear(),t>l.video.duration&&(t=l.video.duration),l.video.currentTime=t.toFixed(3),l.video.paused&&l.btnPlay.click(),Ke(y.currentTime),l.barTimeHitArea.tooltip(d(y.currentTime));break;case 38:var i=l.video.volume+.1;i>1&&(i=1),l.video.volume=i.toFixed(3),$e(l.video.volume);break;case 40:var i=l.video.volume-.1;0>i&&(i=0),l.video.volume=i.toFixed(3),$e(l.video.volume)}}),i[t]("touchmove",function(e){e.preventDefault()});var rt=null;i[t]("touchstart",function(e){v(l.videoDiv,"ABP-HideCursor")&&f(l.videoDiv,"ABP-HideCursor"),e.targetTouches.length>0&&(rt=e.targetTouches[0])}),i[t]("touchend",function(e){if(u(l.videoDiv,"ABP-HideCursor"),e.changedTouches.length>0&&null!=rt){var t=e.changedTouches[0].pageX-rt.pageX,i=e.changedTouches[0].pageY-rt.pageY;if(Math.abs(t)<20&&Math.abs(i)<20)return void(rt=null);Math.abs(t)>3*Math.abs(i)?t>0?l.video.paused&&l.btnPlay.click():l.video.paused||l.btnPlay.click():Math.abs(i)>3*Math.abs(t)&&(l.video.volume=0>i?Math.min(1,l.video.volume+.1):Math.max(0,l.video.volume-.1)),rt=null}}),i[t]("mouseup",function(){if("INPUT"!=document.activeElement.tagName){var e=window.scrollY;l.videoDiv.focus(),window.scrollTo(window.scrollX,e)}})}if("undefined"!=typeof CommentManager&&l.state.autosize){var ct=function(){if(0!==y.videoHeight&&0!==y.videoWidth){var e=y.videoHeight/y.videoWidth,t=i.offsetWidth,a=i.offsetHeight,o=a/t;e>o?(i.style.width=a/e+"px",i.style.height=a+"px"):(i.style.width=t+"px",i.style.height=t*e+"px"),l.cmManager.setBounds()}};y[t]("loadedmetadata",ct),ct()}return shield.init(l),J(".shield-enrty").addEventListener("click",shield.show),J(".shield_top .close").addEventListener("click",shield.show),J(".shield_item .add").addEventListener("click",shield.add),l}}}}}}}}}}}}}}}}}}}}}}}}}}}(),function(e){var t=function(){var t='<div class="colpick"><div class="colpick_color"><div class="colpick_color_overlay1"><div class="colpick_color_overlay2"><div class="colpick_selector_outer"><div class="colpick_selector_inner"></div></div></div></div></div><div class="colpick_hue"><div class="colpick_hue_arrs"><div class="colpick_hue_larr"></div><div class="colpick_hue_rarr"></div></div></div><div class="colpick_new_color"></div><div class="colpick_current_color"></div><div class="colpick_hex_field"><div class="colpick_field_letter">#</div><input type="text" maxlength="6" size="6" /></div><div class="colpick_rgb_r colpick_field"><div class="colpick_field_letter">R</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_rgb_g colpick_field"><div class="colpick_field_letter">G</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_rgb_b colpick_field"><div class="colpick_field_letter">B</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_hsb_h colpick_field"><div class="colpick_field_letter">H</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_hsb_s colpick_field"><div class="colpick_field_letter">S</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_hsb_b colpick_field"><div class="colpick_field_letter">B</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_submit"></div></div>',i={showEvent:"click",onShow:function(){},onBeforeShow:function(){},onHide:function(){},onChange:function(){},onSubmit:function(){},colorScheme:"light",color:"3289c7",livePreview:!0,flat:!1,layout:"full",submit:1,submitText:"OK",height:156},l=function(t,i){var a=n(t);e(i).data("colpick").fields.eq(1).val(a.r).end().eq(2).val(a.g).end().eq(3).val(a.b).end()},r=function(t,i){e(i).data("colpick").fields.eq(4).val(Math.round(t.h)).end().eq(5).val(Math.round(t.s)).end().eq(6).val(Math.round(t.b)).end()},c=function(t,i){e(i).data("colpick").fields.eq(0).val(s(t))},d=function(t,i){e(i).data("colpick").selector.css("backgroundColor","#"+s({h:t.h,s:100,b:100})),e(i).data("colpick").selectorIndic.css({left:parseInt(e(i).data("colpick").height*t.s/100,10),top:parseInt(e(i).data("colpick").height*(100-t.b)/100,10)})},m=function(t,i){e(i).data("colpick").hue.css("top",parseInt(e(i).data("colpick").height-e(i).data("colpick").height*t.h/360,10))},p=function(t,i){e(i).data("colpick").currentColor.css("backgroundColor","#"+s(t))},u=function(t,i){e(i).data("colpick").newColor.css("backgroundColor","#"+s(t))},v=function(){var t,i=e(this).parent().parent();this.parentNode.className.indexOf("_hex")>0?(i.data("colpick").color=t=a(H(this.value)),l(t,i.get(0)),r(t,i.get(0))):this.parentNode.className.indexOf("_hsb")>0?(i.data("colpick").color=t=T({h:parseInt(i.data("colpick").fields.eq(4).val(),10),s:parseInt(i.data("colpick").fields.eq(5).val(),10),b:parseInt(i.data("colpick").fields.eq(6).val(),10)}),l(t,i.get(0)),c(t,i.get(0))):(i.data("colpick").color=t=o(M({r:parseInt(i.data("colpick").fields.eq(1).val(),10),g:parseInt(i.data("colpick").fields.eq(2).val(),10),b:parseInt(i.data("colpick").fields.eq(3).val(),10)})),c(t,i.get(0)),r(t,i.get(0))),d(t,i.get(0)),m(t,i.get(0)),u(t,i.get(0)),i.data("colpick").onChange.apply(i.parent(),[t,s(t),n(t),i.data("colpick").el,0])},f=function(){e(this).parent().removeClass("colpick_focus")},g=function(){e(this).parent().parent().data("colpick").fields.parent().removeClass("colpick_focus"),e(this).parent().addClass("colpick_focus")},h=function(t){t.preventDefault?t.preventDefault():t.returnValue=!1;var i=e(this).parent().find("input").focus(),a={el:e(this).parent().addClass("colpick_slider"),max:this.parentNode.className.indexOf("_hsb_h")>0?360:this.parentNode.className.indexOf("_hsb")>0?100:255,y:t.pageY,field:i,val:parseInt(i.val(),10),preview:e(this).parent().parent().data("colpick").livePreview};e(document).mouseup(a,y),e(document).mousemove(a,_)},_=function(e){return e.data.field.val(Math.max(0,Math.min(e.data.max,parseInt(e.data.val-e.pageY+e.data.y,10)))),e.data.preview&&v.apply(e.data.field.get(0),[!0]),!1},y=function(t){return v.apply(t.data.field.get(0),[!0]),t.data.el.removeClass("colpick_slider").find("input").focus(),e(document).off("mouseup",y),e(document).off("mousemove",_),!1},b=function(t){t.preventDefault?t.preventDefault():t.returnValue=!1;var i={cal:e(this).parent(),y:e(this).offset().top};e(document).on("mouseup touchend",i,k),e(document).on("mousemove touchmove",i,S);var a="touchstart"==t.type?t.originalEvent.changedTouches[0].pageY:t.pageY;return v.apply(i.cal.data("colpick").fields.eq(4).val(parseInt(360*(i.cal.data("colpick").height-(a-i.y))/i.cal.data("colpick").height,10)).get(0),[i.cal.data("colpick").livePreview]),!1},S=function(e){var t="touchmove"==e.type?e.originalEvent.changedTouches[0].pageY:e.pageY;return v.apply(e.data.cal.data("colpick").fields.eq(4).val(parseInt(360*(e.data.cal.data("colpick").height-Math.max(0,Math.min(e.data.cal.data("colpick").height,t-e.data.y)))/e.data.cal.data("colpick").height,10)).get(0),[e.data.preview]),!1},k=function(t){return l(t.data.cal.data("colpick").color,t.data.cal.get(0)),c(t.data.cal.data("colpick").color,t.data.cal.get(0)),
e(document).off("mouseup touchend",k),e(document).off("mousemove touchmove",S),!1},B=function(t){t.preventDefault?t.preventDefault():t.returnValue=!1;var i={cal:e(this).parent(),pos:e(this).offset()};i.preview=i.cal.data("colpick").livePreview,e(document).on("mouseup touchend",i,C),e(document).on("mousemove touchmove",i,P);var a,o;return"touchstart"==t.type?(a=t.originalEvent.changedTouches[0].pageX,o=t.originalEvent.changedTouches[0].pageY):(a=t.pageX,o=t.pageY),v.apply(i.cal.data("colpick").fields.eq(6).val(parseInt(100*(i.cal.data("colpick").height-(o-i.pos.top))/i.cal.data("colpick").height,10)).end().eq(5).val(parseInt(100*(a-i.pos.left)/i.cal.data("colpick").height,10)).get(0),[i.preview]),!1},P=function(e){var t,i;return"touchmove"==e.type?(t=e.originalEvent.changedTouches[0].pageX,i=e.originalEvent.changedTouches[0].pageY):(t=e.pageX,i=e.pageY),v.apply(e.data.cal.data("colpick").fields.eq(6).val(parseInt(100*(e.data.cal.data("colpick").height-Math.max(0,Math.min(e.data.cal.data("colpick").height,i-e.data.pos.top)))/e.data.cal.data("colpick").height,10)).end().eq(5).val(parseInt(100*Math.max(0,Math.min(e.data.cal.data("colpick").height,t-e.data.pos.left))/e.data.cal.data("colpick").height,10)).get(0),[e.data.preview]),!1},C=function(t){return l(t.data.cal.data("colpick").color,t.data.cal.get(0)),c(t.data.cal.data("colpick").color,t.data.cal.get(0)),e(document).off("mouseup touchend",C),e(document).off("mousemove touchmove",P),!1},A=function(){var t=e(this).parent(),i=t.data("colpick").color;t.data("colpick").origColor=i,p(i,t.get(0)),t.data("colpick").onSubmit(i,s(i),n(i),t.data("colpick").el)},N=function(t){t.stopPropagation();var i=e("#"+e(this).data("colpickId"));i.data("colpick").onBeforeShow.apply(this,[i.get(0)]);var a=e(this).offset(),o=a.top+this.offsetHeight,n=a.left,l=w(),s=i.width();n+s>l.l+l.w&&(n-=s),i.css({left:n+"px",top:o+"px"}),0!=i.data("colpick").onShow.apply(this,[i.get(0)])&&i.show(),e("html").mousedown({cal:i},x),i.mousedown(function(e){e.stopPropagation()})},x=function(t){0!=t.data.cal.data("colpick").onHide.apply(this,[t.data.cal.get(0)])&&t.data.cal.hide(),e("html").off("mousedown",x)},w=function(){var e="CSS1Compat"==document.compatMode;return{l:window.pageXOffset||(e?document.documentElement.scrollLeft:document.body.scrollLeft),w:window.innerWidth||(e?document.documentElement.clientWidth:document.body.clientWidth)}},T=function(e){return{h:Math.min(360,Math.max(0,e.h)),s:Math.min(100,Math.max(0,e.s)),b:Math.min(100,Math.max(0,e.b))}},M=function(e){return{r:Math.min(255,Math.max(0,e.r)),g:Math.min(255,Math.max(0,e.g)),b:Math.min(255,Math.max(0,e.b))}},H=function(e){var t=6-e.length;if(t>0){for(var i=[],a=0;t>a;a++)i.push("0");i.push(e),e=i.join("")}return e},F=function(){var t=e(this).parent(),i=t.data("colpick").origColor;t.data("colpick").color=i,l(i,t.get(0)),c(i,t.get(0)),r(i,t.get(0)),d(i,t.get(0)),m(i,t.get(0)),u(i,t.get(0))};return{init:function(n){if(n=e.extend({},i,n||{}),"string"==typeof n.color)n.color=a(n.color);else if(void 0!=n.color.r&&void 0!=n.color.g&&void 0!=n.color.b)n.color=o(n.color);else{if(void 0==n.color.h||void 0==n.color.s||void 0==n.color.b)return this;n.color=T(n.color)}return this.each(function(){if(!e(this).data("colpickId")){var i=e.extend({},n);i.origColor=n.color;var a="collorpicker_"+parseInt(1e3*Math.random());e(this).data("colpickId",a);var o=e(t).attr("id",a);o.addClass("colpick_"+i.layout+(i.submit?"":" colpick_"+i.layout+"_ns")),"light"!=i.colorScheme&&o.addClass("colpick_"+i.colorScheme),o.find("div.colpick_submit").html(i.submitText).click(A),i.fields=o.find("input").change(v).blur(f).focus(g),o.find("div.colpick_field_arrs").mousedown(h).end().find("div.colpick_current_color").click(F),i.selector=o.find("div.colpick_color").on("mousedown touchstart",B),i.selectorIndic=i.selector.find("div.colpick_selector_outer"),i.el=this,i.hue=o.find("div.colpick_hue_arrs"),huebar=i.hue.parent();var s=navigator.userAgent.toLowerCase(),_="Microsoft Internet Explorer"===navigator.appName,y=_?parseFloat(s.match(/msie ([0-9]{1,}[\.0-9]{0,})/)[1]):0,S=_&&10>y,k=["#ff0000","#ff0080","#ff00ff","#8000ff","#0000ff","#0080ff","#00ffff","#00ff80","#00ff00","#80ff00","#ffff00","#ff8000","#ff0000"];if(S){var P,C;for(P=0;11>=P;P++)C=e("<div></div>").attr("style","height:8.333333%; filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr="+k[P]+", endColorstr="+k[P+1]+'); -ms-filter: "progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr='+k[P]+", endColorstr="+k[P+1]+')";'),huebar.append(C)}else stopList=k.join(","),huebar.attr("style","background:-webkit-linear-gradient(top,"+stopList+"); background: -o-linear-gradient(top,"+stopList+"); background: -ms-linear-gradient(top,"+stopList+"); background:-moz-linear-gradient(top,"+stopList+"); -webkit-linear-gradient(top,"+stopList+"); background:linear-gradient(to bottom,"+stopList+"); ");o.find("div.colpick_hue").on("mousedown touchstart",b),i.newColor=o.find("div.colpick_new_color"),i.currentColor=o.find("div.colpick_current_color"),o.data("colpick",i),l(i.color,o.get(0)),r(i.color,o.get(0)),c(i.color,o.get(0)),m(i.color,o.get(0)),d(i.color,o.get(0)),p(i.color,o.get(0)),u(i.color,o.get(0)),i.flat?(o.appendTo(this).show(),o.css({position:"relative",display:"block"})):(o.appendTo(document.body),e(this).on(i.showEvent,N),o.css({position:"absolute"}))}})},showPicker:function(){return this.each(function(){e(this).data("colpickId")&&N.apply(this)})},hidePicker:function(){return this.each(function(){e(this).data("colpickId")&&e("#"+e(this).data("colpickId")).hide()})},setColor:function(t,i){if(i="undefined"==typeof i?1:i,"string"==typeof t)t=a(t);else if(void 0!=t.r&&void 0!=t.g&&void 0!=t.b)t=o(t);else{if(void 0==t.h||void 0==t.s||void 0==t.b)return this;t=T(t)}return this.each(function(){if(e(this).data("colpickId")){var a=e("#"+e(this).data("colpickId"));a.data("colpick").color=t,a.data("colpick").origColor=t,l(t,a.get(0)),r(t,a.get(0)),c(t,a.get(0)),m(t,a.get(0)),d(t,a.get(0)),u(t,a.get(0)),a.data("colpick").onChange.apply(a.parent(),[t,s(t),n(t),a.data("colpick").el,1]),i&&p(t,a.get(0))}})}}}(),i=function(e){var e=parseInt(e.indexOf("#")>-1?e.substring(1):e,16);return{r:e>>16,g:(65280&e)>>8,b:255&e}},a=function(e){return o(i(e))},o=function(e){var t={h:0,s:0,b:0},i=Math.min(e.r,e.g,e.b),a=Math.max(e.r,e.g,e.b),o=a-i;return t.b=a,t.s=0!=a?255*o/a:0,t.h=0!=t.s?e.r==a?(e.g-e.b)/o:e.g==a?2+(e.b-e.r)/o:4+(e.r-e.g)/o:-1,t.h*=60,t.h<0&&(t.h+=360),t.s*=100/255,t.b*=100/255,t},n=function(e){var t={},i=e.h,a=255*e.s/100,o=255*e.b/100;if(0==a)t.r=t.g=t.b=o;else{var n=o,l=(255-a)*o/255,s=(n-l)*(i%60)/60;360==i&&(i=0),60>i?(t.r=n,t.b=l,t.g=l+s):120>i?(t.g=n,t.b=l,t.r=n-s):180>i?(t.g=n,t.r=l,t.b=l+s):240>i?(t.b=n,t.r=l,t.g=n-s):300>i?(t.b=n,t.g=l,t.r=l+s):360>i?(t.r=n,t.g=l,t.b=n-s):(t.r=0,t.g=0,t.b=0)}return{r:Math.round(t.r),g:Math.round(t.g),b:Math.round(t.b)}},l=function(t){var i=[t.r.toString(16),t.g.toString(16),t.b.toString(16)];return e.each(i,function(e,t){1==t.length&&(i[e]="0"+t)}),i.join("")},s=function(e){return l(n(e))};e.fn.extend({colpick:t.init,colpickHide:t.hidePicker,colpickShow:t.showPicker,colpickSetColor:t.setColor}),e.extend({colpick:{rgbToHex:l,rgbToHsb:o,hsbToHex:s,hsbToRgb:n,hexToHsb:a,hexToRgb:i}})}(jQuery);